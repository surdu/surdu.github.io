<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png?v">
	<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
	<link rel="shortcut icon" href="/assets/favicon/favicon.ico">

	<title>Automate Building GitHub Pages That Use Jekyll Plugins | Nicu Surdu</title>

	

	<meta name="description" content="As of the writing of this article, this blog‚Äôs content is generated using Jekyll and hosted on GitHub Pages. Until recently all was well: I pushed my code to the master branch on my website‚Äôs repository and GitHub took care of generating the website for me using Jekyll. All this changed when I started needing to use a custom Jekyll plugin, as GitHub Pages don‚Äôt support custom plugins due to security concerns." />

	<meta property="og:locale" content="en_US" />
	<meta property="og:type" content="article" />
	<meta property="og:title" content="Automate Building GitHub Pages That Use Jekyll Plugins" />
	<meta property="og:description" content="As of the writing of this article, this blog‚Äôs content is generated using Jekyll and hosted on GitHub Pages. Until recently all was well: I pushed my code to the master branch on my website‚Äôs repository and GitHub took care of generating the website for me using Jekyll. All this changed when I started needing to use a custom Jekyll plugin, as GitHub Pages don‚Äôt support custom plugins due to security concerns." />
	<meta property="og:url" content="http://surdu.me/2020/02/04/jekyll-git-hook.html" />
	<meta property="og:site_name" content="Nicu Surdu" />

	<meta name="twitter:title" content="Automate Building GitHub Pages That Use Jekyll Plugins" />
	<meta name="twitter:description" content="As of the writing of this article, this blog‚Äôs content is generated using Jekyll and hosted on GitHub Pages. Until recently all was well: I pushed my code to the master branch on my website‚Äôs repository and GitHub took care of generating the website for me using Jekyll. All this changed when I started needing to use a custom Jekyll plugin, as GitHub Pages don‚Äôt support custom plugins due to security concerns." />
	<meta name="twitter:creator" content="@surdume" />
	<meta name="twitter:site" content="@surdume" />
	<meta name="twitter:domain" content="surdu.me" />
	
	<meta property="og:image" content="http://surdu.me/assets/images/profile.jpg" />
	<meta property="og:image:secure_url" content="http://surdu.me/assets/images/profile.jpg" />
	<meta name="twitter:card" content="summary" />
	<meta name="twitter:image" content="http://surdu.me/assets/images/profile.jpg" />
	
	

	<meta name="google-site-verification" content="qS6PD1v2cPj6gw4QeROZgOtRiolrbkSBHAJ7V9RCpFs" />
	<meta name="HandheldFriendly" content="True" />
	<meta name="MobileOptimized" content="320" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="theme-color" content="#000000" />

	<link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
	<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
	<link rel="stylesheet" type="text/css" href="/assets/css/main.css" />
</head>
<body class="post-template">

	<header class="main-header post-head no-cover">
	<nav class="main-nav  clearfix">
		<a class="back-button icon-arrow-left" href="/">Home</a>
		<a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
	</nav>
</header>

<main class="content" role="main">

	<article class="post">

		<header class="post-header">
			<h1 class="post-title">Automate Building GitHub Pages That Use Jekyll Plugins</h1>
			<section class="post-meta">
				<time class="post-date" datetime="2020-02-04">04 Feb 2020</time>
				

			</section>
		</header>

		<section class="post-content">
			<p>As of the writing of this article, this blog‚Äôs content is generated using <a href="https://jekyllrb.com/">Jekyll</a> and hosted on <a href="https://pages.github.com/">GitHub Pages</a>. Until recently all was well: I pushed my code to the <code class="language-plaintext highlighter-rouge">master</code> branch on my website‚Äôs repository and GitHub took care of generating the website for me using Jekyll. All this changed when I started needing to use a custom Jekyll plugin, as GitHub Pages don‚Äôt support custom plugins due to security concerns.</p>

<p>What is needed in order to use GitHub pages with custom plugins is to generate the website locally and then upload the generated content to a special branch on your repository called <code class="language-plaintext highlighter-rouge">gh-pages</code>.</p>

<p>The solution that I‚Äôve implemented involves creating a pre-push git hook that will do the following if it sees a push on the <code class="language-plaintext highlighter-rouge">master</code> branch:</p>

<ol>
  <li>build the Jekyll website locally</li>
  <li>moves the <code class="language-plaintext highlighter-rouge">_site</code> folder that contains the generated website somewhere outside of the current folder (I choose the parent folder for simplicity)</li>
  <li>checkout the <code class="language-plaintext highlighter-rouge">gh-pages</code> branch and remove everything from the working directory</li>
  <li>copy back the content of the <code class="language-plaintext highlighter-rouge">_site</code> folder directly into the current working directory</li>
  <li>commit and push the newly copied content on the <code class="language-plaintext highlighter-rouge">gh-pages</code> branch</li>
</ol>

<p>What we need to do first is to set-up our repository for this purpose.</p>

<p>First thing that we need to do is make sure we have Jekyll installed locally. Please check <a href="https://jekyllrb.com/docs/installation/">Jekyll documentation</a> for that.</p>

<p>Afterwards, we need to make sure we have the <code class="language-plaintext highlighter-rouge">gh-pages</code> branch on the repository. To do this, run the following terminal command in your local repository folder:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout <span class="nt">-b</span> gh-pages
git push origin gh-pages
</code></pre></div></div>

<p>If you already have the <code class="language-plaintext highlighter-rouge">gh-pages</code>, just run <code class="language-plaintext highlighter-rouge">git checkout gh-pages</code>.</p>

<p>Next, we‚Äôll need to make sure this new branch doesn‚Äôt contain anything. This is especially the case when we don‚Äôt do this at the inception of the repository and the <code class="language-plaintext highlighter-rouge">gh-pages</code> will basically inherit the content from the branch we made it from.</p>

<p>To clean the <code class="language-plaintext highlighter-rouge">gh-pages</code> branch, run the following in the terminal:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout gh-pages
<span class="nb">rm</span> <span class="nt">-rf</span> <span class="k">*</span>
git add <span class="nt">-A</span>
git commit <span class="nt">-m</span> <span class="s2">"Initialized gh-pages branch"</span>
git push
</code></pre></div></div>

<p>Now that the <code class="language-plaintext highlighter-rouge">gh-pages</code> branch contains no file, we‚Äôre ready to add the git hook that will take care of generating the content for us.</p>

<p>First let‚Äôs create the git hook file:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch</span> .git/hooks/pre-push
</code></pre></div></div>

<p>This will create a file in the <code class="language-plaintext highlighter-rouge">.git/hooks</code> folder called pre-push. Open it in your preferred editor and paste in the following content:</p>

<gist id="gist-a3224b51c37f6f2b6cf1aeb9fc98bd23" data-file="pre-push"></gist>

<p>Please note the comments in the above code (lines starting with #) which explain what each section of the code does. You should find steps that are listed in the beginning of this article.</p>

<p>And that‚Äôs it! Now, every time you push a commit to the <code class="language-plaintext highlighter-rouge">master</code> branch, you <code class="language-plaintext highlighter-rouge">gh-pages</code> branch should be updated with the content of your website.</p>

<p>Hope this helps! üëç</p>

		</section>

		

		<footer class="post-footer">
			<!-- If we want to display author's name and bio -->
			
				<figure class="author-image">
					<a class="img"
						href="/about.html"
						aria-label="About Nicu Surdu"
						style="background-image: url(/assets/images/profile.jpg)">
					<span class="hidden">Nicu Surdu's Picture</span></a>
				</figure>
				<section class="author">
					<!-- Author Name -->
					<div class="post-footer-title">Nicu Surdu</div>
					<!-- Author Bio -->
					<p>
							Technical Lead at <a href="https://www.3pillarglobal.com/">3Pillar Global</a> <br />
							and co-founder of <a href="http://creativespace.ro/">Creative Space</a>, a cool makerspace in Timi»ôoara, Romania.
					</p>
				</section>
			

			<!-- Share links section -->
			<section class="share">
	<div class="post-footer-title">Share this post</div>
	<a class="icon-twitter"
		href="http://twitter.com/share?text=Automate Building GitHub Pages That Use Jekyll Plugins&amp;url=http://surdu.me/2020/02/04/jekyll-git-hook.html"
		aria-label="Share on Twitter"
		onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
	</a>
	<a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://surdu.me/2020/02/04/jekyll-git-hook.html"
		aria-label="Share on Facebook"
		onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
	</a>
	<a class="icon-google-plus"
		href="https://plus.google.com/share?url=http://surdu.me/2020/02/04/jekyll-git-hook.html"
		aria-label="Share on Google+"
		onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
	</a>
</section>

		</footer>

		<!-- Disqus comments -->
		
				<section class="disqus">
 <h3>Comments</h3>
	<div id="disqus_thread"></div>
	<script>
		var disqus_config = function () {
			this.page.url = "http://surdu.me/2020/02/04/jekyll-git-hook.html";
			this.page.identifier = "/2020/02/04/jekyll-git-hook.html";
		};

		(function() {
			var d = document, s = d.createElement('script');
			s.src = 'https://surdu-me.disqus.com/embed.js';
			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
		})();
	</script>
</section>

		

	</article>

</main>

	<footer class="site-footer clearfix" aria-disabled="true">
		<section class="copyright">
			<b>Nicu Surdu</b> &copy; 2021
		</section>
		<section class="poweredby">
			<a href="http://github.com/rosario/kasper">Kasper theme</a>
		</section>
	</footer>

	<script type="text/javascript" src="/assets/js/jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
	<script type="text/javascript" src="/assets/js/index.js"></script>
	<script type="text/javascript" src="/assets/js/gist-embed.js"></script>
	<script type="text/javascript" src="/assets/js/favicon.js"></script><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-19732240-4"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-19732240-4');
</script>
</body>
</html>
